<h1>æ­¡è¿æ­¡è¿</h1>
<pre aria-label="è­¯æ–‡ï¼šlogin" class="tw-data-text tw-text-large tw-ta" data-placeholder="ç¿»è­¯" data-ved="2ahUKEwjE2dnJjcKRAxXg1DQHHUbaE4wQ3ewLegQIDhAW" id="tw-target-text" role="text" tabindex="-1"><span class="Y2IQFc" lang="en">Login</span>å¯†ç¢¼:admin</pre>
<p>å¯æ”œç¨‹å¼:<a href="http://229.cycu.org/portable_2026.7z">portable_2026.7z</a>Â </p>
<p>å€‹äººgithub:<a href="https://github.com/LanChienEn/w11">https://github.com/LanChienEn/w11</a></p>
<p style="padding-left: 60px;"></p>
<p></p>
<h1>BrythonæŒ‡ä»¤å€</h1>
<p><button id="add1to100">1 add to 100</button><button id="robot1">æ©Ÿå™¨äººå·¡é‚</button><button id="free_walk">è‡ªç”±è¡Œ</button></p>
<!-- å°å…¥ brython ç¨‹å¼åº« -->
<p>
<script src="/static/brython.js"></script>
<script src="/static/brython_stdlib.js"></script>
</p>
<!-- å•Ÿå‹• Brython -->
<p>
<script>
window.onload=function(){
brython({debug:1, pythonpath:['/static/','./../downloads/py/']});
}
</script>
</p>
<p><!-- å°å…¥ FileSaver èˆ‡ filereader --></p>
<p>
<script src="/static/ace/FileSaver.min.js" type="text/javascript"></script>
<script src="/static/ace/filereader.js" type="text/javascript"></script>
</p>
<p><!-- å°å…¥ ace --></p>
<p>
<script src="/static/ace/ace.js" type="text/javascript"></script>
<script src="/static/ace/ext-language_tools.js" type="text/javascript"></script>
<script src="/static/ace/mode-python3.js" type="text/javascript"></script>
<script src="/static/ace/snippets/python.js" type="text/javascript"></script>
</p>
<p><!-- å°å…¥ gearUtils-0.9.js Cango é½’è¼ªç¹ªåœ–ç¨‹å¼åº« -->
<script src="/static/Cango-24v03-min.js"></script>
<script src="/static/gearUtils-09.js"></script>
<script src="/static/SVGpathUtils-6v03-min.js"></script>
<script src="/static/sylvester.js"></script>
<script src="/static/PrairieDraw.js"></script>
</p>
<p><!-- è«‹æ³¨æ„, é€™è£¡ä½¿ç”¨ Javascript å°‡ localStorage["kw_py_src1"] ä¸­å­˜åœ¨è¿‘ç«¯ç€è¦½å™¨çš„ç¨‹å¼ç¢¼, ç”±ä½¿ç”¨è€…æ±ºå®šå­˜æª”åç¨±--></p>
<p>
<script type="text/javascript">
function doSave(storage_id, filename){
    var blob = new Blob([localStorage[storage_id]], {type: "text/plain;charset=utf-8"});
    filename = document.getElementById(filename).value
    saveAs(blob, filename+".py");
}
</script>
</p>
<p><!-- ç´¯åŠ ç¨‹å¼é–‹å§‹ -->
<script type="text/python3">
from browser import document as doc
import ace
# æ¸…é™¤ç•«å¸ƒ
def clear_bd1(ev):
    bd = doc["brython_div1"]
    bd.clear()
Ace1 = ace.Editor(editor_id="kw_editor1", console_id="kw_console1", container_id="kw__container1", storage_id="kw_py_src1" )
# å¾ gist å–å‡ºç¨‹å¼ç¢¼å¾Œ, æ”¾å…¥ editor ä½œç‚º default ç¨‹å¼
def run1():
    # åˆ©ç”¨ get å–ä¸‹ src è®Šæ•¸å€¼
    try:
        url = doc.query["src"]
    except:
        url = "https://gist.githubusercontent.com/mdecourse/0229a8a017091476a79700b8a190f185/raw/c3a6deaf717f8f2739a4b1392a5ab10936e9693a/from_1_add_to_10_1.py"
    prog = open(url).read()

    # å°‡ç¨‹å¼è¼‰å…¥ç·¨è¼¯å€
    Ace1.editor.setValue(prog)
    Ace1.editor.scrollToRow(0)
    Ace1.editor.gotoLine(0)
    # ç›´æ¥åŸ·è¡Œç¨‹å¼
    #ns = {'__name__':'__main__'}
    #exec(prog, ns)
    # æŒ‰ä¸‹ run æŒ‰éˆ•
    Ace1.run()
# åŸ·è¡Œç¨‹å¼, é¡¯ç¤ºè¼¸å‡ºçµæœèˆ‡æ¸…é™¤è¼¸å‡ºçµæœåŠå°æ‡‰æŒ‰éˆ•ç¶å®š
doc['kw_run1'].bind('click', Ace1.run)
doc['kw_show_console1'].bind('click', Ace1.show_console)
doc['kw_clear_console1'].bind('click', Ace1.clear_console)
doc['clear_bd1'].bind('click', clear_bd1)
# å‘¼å«å‡½å¼åŸ·è¡Œ
run1()
</script>
<!-- ç´¯åŠ ç¨‹å¼çµæŸ --> <!-- æ©Ÿå™¨äººå·¡é‚ç¨‹å¼é–‹å§‹ -->
<script type="text/python3">
from browser import document as doc
import ace

# æ¸…é™¤ç•«å¸ƒ
def clear_bd1(ev):
    bd = doc["brython_div1"]
    bd.clear()

# åˆ©ç”¨ ace ä¸­çš„ Editor å»ºç«‹ Ace2 ç‰©ä»¶, å…¶ä¸­çš„è¼¸å…¥è®Šæ•¸åˆ†åˆ¥å°æ‡‰åˆ°é é¢ä¸­çš„ç·¨è¼¯å€ç‰©ä»¶
Ace2 = ace.Editor(editor_id="kw_editor1", console_id="kw_console1", container_id="kw__container1", storage_id="kw_py_src1" )

robot1_url = "https://gist.githubusercontent.com/mdecycu/ec4bb35dd0769e7a83d2a9fa57878a67/raw/b33c5fc2a0774f8c5d2b0e8c7c7908e58d73bb94/robot_1.py"

# å¾ gist å–å¾—ç¨‹å¼ç¢¼
robot1_src = open(robot1_url).read()
def robot1(ev):
    Ace2.editor.setValue(robot1_src)
    Ace2.editor.scrollToRow(0)
    Ace2.editor.gotoLine(0)
    Ace2.run()

# id ç‚º "robot1" çš„æŒ‰éˆ•é»æŒ‰æ™‚, åŸ·è¡Œ robot1 æ–¹æ³•
doc["robot1"].bind('click', robot1)
</script>
<!-- æ©Ÿå™¨äººå·¡é‚ç¨‹å¼çµæŸ --></p>
<!-- æ©Ÿå™¨äººè‡ªç”±è¡Œç¨‹å¼é–‹å§‹ -->
<p>
<script type="text/python3">
from browser import document as doc
import ace

# æ¸…é™¤ç•«å¸ƒ
def clear_bd1(ev):
    bd = doc["brython_div1"]
    bd.clear()

# åˆ©ç”¨ ace ä¸­çš„ Editor å»ºç«‹ Ace2 ç‰©ä»¶, å…¶ä¸­çš„è¼¸å…¥è®Šæ•¸åˆ†åˆ¥å°æ‡‰åˆ°é é¢ä¸­çš„ç·¨è¼¯å€ç‰©ä»¶
Ace2 = ace.Editor(editor_id="kw_editor1", console_id="kw_console1", container_id="kw__container1", storage_id="kw_py_src1" )

free_walk_url = "https://gist.githubusercontent.com/mdecycu/ec4bb35dd0769e7a83d2a9fa57878a67/raw/9d55811467e411eb89f74171d8a586ae9f1a96aa/brython_robot_free_walk.py"

# å¾ gist å–å¾—ç¨‹å¼ç¢¼
free_walk_src = open(free_walk_url).read()
def free_walk(ev):
    Ace2.editor.setValue(free_walk_src)
    Ace2.editor.scrollToRow(0)
    Ace2.editor.gotoLine(0)
    Ace2.run()

# id ç‚º "free_walk" çš„æŒ‰éˆ•é»æŒ‰æ™‚, åŸ·è¡Œ robot1 æ–¹æ³•
doc["free_walk"].bind('click', free_walk)
</script>
</p>
<!-- æ©Ÿå™¨äººè‡ªç”±è¡Œç¨‹å¼çµæŸ -->
<p><!-- add 1 to 100 é–‹å§‹ -->
<script type="text/python3">
from browser import document as doc
import ace

# æ¸…é™¤ç•«å¸ƒ
def clear_bd1(ev):
    bd = doc["brython_div1"]
    bd.clear()

# åˆ©ç”¨ ace ä¸­çš„ Editor å»ºç«‹ Ace2 ç‰©ä»¶, å…¶ä¸­çš„è¼¸å…¥è®Šæ•¸åˆ†åˆ¥å°æ‡‰åˆ°é é¢ä¸­çš„ç·¨è¼¯å€ç‰©ä»¶
Ace2 = ace.Editor(editor_id="kw_editor1", console_id="kw_console1", container_id="kw__container1", storage_id="kw_py_src1" )

add1to100_url = "https://gist.githubusercontent.com/mdecourse/0229a8a017091476a79700b8a190f185/raw/c48e37714f055c3a0027cbfef59e442a6ef659b9/from_1_add_to_100_1.py"

# å¾ gist å–å¾—ç¨‹å¼ç¢¼
add_src = open(add1to100_url).read()
def add(ev):
    Ace2.editor.setValue(add_src)
    Ace2.editor.scrollToRow(0)
    Ace2.editor.gotoLine(0)
    Ace2.run()

# id ç‚º "add1to100" çš„æŒ‰éˆ•é»æŒ‰æ™‚, åŸ·è¡Œ add æ–¹æ³•
doc["add1to100"].bind('click', add)
</script>
</p>
<p><!-- add 1 to 100 çµæŸ--></p>
<!-- editor1 é–‹å§‹ -->
<p><!-- ç”¨ä¾†é¡¯ç¤ºç¨‹å¼ç¢¼çš„ editor å€åŸŸ --></p>
<div id="kw_editor1" style="width: 600px; height: 300px;"></div>
<p><!-- ä»¥ä¸‹çš„è¡¨å–®èˆ‡æŒ‰éˆ•èˆ‡å‰é¢çš„ Javascript doSave å‡½å¼ä»¥åŠ FileSaver.min.js äº’ç›¸é…åˆ --></p>
<p><!-- å­˜æ“‹è¡¨å–®é–‹å§‹ --></p>
<form><label>Filename: <input id="kw_filename" placeholder="input file name" type="text"/>.py</label> <input onclick="doSave('kw_py_src1', 'kw_filename1');" type="submit" value="Save"/></form>
<p><!-- å­˜æ“‹è¡¨å–®çµæŸ --></p>
<p></p>
<p><!-- åŸ·è¡Œèˆ‡æ¸…é™¤æŒ‰éˆ•é–‹å§‹ --></p>
<p><button id="kw_run1">Run</button> <button id="kw_show_console1">Output</button> <button id="kw_clear_console1">æ¸…é™¤è¼¸å‡ºå€</button><button id="clear_bd1">æ¸…é™¤ç¹ªåœ–å€</button><button onclick="window.location.reload()">Reload</button></p>
<p><!-- åŸ·è¡Œèˆ‡æ¸…é™¤æŒ‰éˆ•çµæŸ --></p>
<p></p>
<p><!-- ç¨‹å¼åŸ·è¡Œ ouput å€ --></p>
<div style="width: 100%; height: 100%;"><textarea autocomplete="off" id="kw_console1"></textarea></div>
<p><!-- Brython ç¨‹å¼åŸ·è¡Œçš„çµæœ, éƒ½ä»¥ brython_div1 ä½œç‚ºåˆ‡å…¥ä½ç½® --></p>
<div id="brython_div1"></div>
<!-- editor1 çµæŸ --><hr/><!-- ########################################## -->
<p>å¾ 1 ç´¯åŠ åˆ° 100 part2:</p>
<p><button id="add1to100part2">1 add to 100</button><button id="cango_three_gears">cango_three_gears</button><button id="bsnake">BSnake</button><button id="aitetris">AI Tetris</button></p>
<p><!-- è«‹æ³¨æ„, é€™è£¡ä½¿ç”¨ Javascript å°‡ localStorage["kw_py_src2"] ä¸­å­˜åœ¨è¿‘ç«¯ç€è¦½å™¨çš„ç¨‹å¼ç¢¼, ç”±ä½¿ç”¨è€…æ±ºå®šå­˜æª”åç¨±--></p>
<p>
<script type="text/python3">
from browser import document as doc
import ace
# æ¸…é™¤ç•«å¸ƒ
def clear_bd2(ev):
    bd = doc["brython_div2"]
    bd.clear()
Ace3 = ace.Editor(editor_id="kw_editor2", console_id="kw_console2", container_id="kw__container2", storage_id="kw_py_src2" )
# å¾ gist å–å‡ºç¨‹å¼ç¢¼å¾Œ, æ”¾å…¥ editor ä½œç‚º default ç¨‹å¼
def run2():
    # åˆ©ç”¨ get å–ä¸‹ src è®Šæ•¸å€¼
    try:
        url = doc.query["src2"]
    except:
        url = "https://gist.githubusercontent.com/mdecourse/0229a8a017091476a79700b8a190f185/raw/c3a6deaf717f8f2739a4b1392a5ab10936e9693a/from_1_add_to_10_1.py"
    prog = open(url).read()

    # å°‡ç¨‹å¼è¼‰å…¥ç·¨è¼¯å€
    Ace3.editor.setValue(prog)
    Ace3.editor.scrollToRow(0)
    Ace3.editor.gotoLine(0)
    # ç›´æ¥åŸ·è¡Œç¨‹å¼
    #ns = {'__name__':'__main__'}
    #exec(prog, ns)
    # æŒ‰ä¸‹ run æŒ‰éˆ•
    Ace3.run()

# åŸ·è¡Œç¨‹å¼, é¡¯ç¤ºè¼¸å‡ºçµæœèˆ‡æ¸…é™¤è¼¸å‡ºçµæœåŠå°æ‡‰æŒ‰éˆ•ç¶å®š
doc['kw_run2'].bind('click', Ace3.run)
doc['kw_show_console2'].bind('click', Ace3.show_console)
doc['kw_clear_console2'].bind('click', Ace3.clear_console)
doc['clear_bd2'].bind('click', clear_bd2)
# å‘¼å«å‡½å¼åŸ·è¡Œ
run2()
</script>
</p>
<p><!-- add 1 to 100 part2 é–‹å§‹ -->
<script type="text/python3">
from browser import document as doc
import ace

# æ¸…é™¤ç•«å¸ƒ
def clear_bd2(ev):
    bd = doc["brython_div2"]
    bd.clear()

# åˆ©ç”¨ ace ä¸­çš„ Editor å»ºç«‹ Ace2 ç‰©ä»¶, å…¶ä¸­çš„è¼¸å…¥è®Šæ•¸åˆ†åˆ¥å°æ‡‰åˆ°é é¢ä¸­çš„ç·¨è¼¯å€ç‰©ä»¶
Ace4 = ace.Editor(editor_id="kw_editor2", console_id="kw_console2", container_id="kw__container2", storage_id="kw_py_src2" )

# é€é Ace4 ä»¥é¡åˆ¥å»ºç«‹ä¸€å€‹é€šç”¨çš„ button2, å¯ä»¥åœ¨å¤šå€‹æ¡ˆä¾‹ä¸­å°‡ gist ç¨‹å°å…¥ç·¨è¼¯å€

class button2:
    def __init__(self, url):
        self.url = url

    # è¨˜å¾—åŠ å…¥ event è¼¸å…¥è®Šæ•¸
    def do(self,ev):
        Ace4.editor.setValue(open(self.url).read())
        Ace4.editor.scrollToRow(0)
        Ace4.editor.gotoLine(0)
        Ace4.run()

add1to100_url = "https://gist.githubusercontent.com/mdecourse/0229a8a017091476a79700b8a190f185/raw/c48e37714f055c3a0027cbfef59e442a6ef659b9/from_1_add_to_100_1.py"

# å¾ gist å–å¾—ç¨‹å¼ç¢¼
add_src = open(add1to100_url).read()
def add2(ev):
    Ace4.editor.setValue(add_src)
    Ace4.editor.scrollToRow(0)
    Ace4.editor.gotoLine(0)
    Ace4.run()

# id ç‚º "add1to100part2" çš„æŒ‰éˆ•é»æŒ‰æ™‚, åŸ·è¡Œ add æ–¹æ³•
doc["add1to100part2"].bind('click', add2)
# ä»¥ä¸‹ç‚ºé‹ç”¨ button2 class çš„é€šç”¨ gist ç¨‹å¼å°å…¥å€
################################## cango_three_gears start
cango_three_gears_url = "https://gist.githubusercontent.com/mdecycu/d9082d678096bd58378d6afe2c7fa05d/raw/f7a85d737d6723d5e34c526d5daee990ed92c32b/cango_three_gears_brython_div2.py"
cango_three_gears = button2(cango_three_gears_url)
doc["cango_three_gears"].bind("click", cango_three_gears.do)
################################## cango_three_gears end
################################## bsnake start
bsnake_url = "https://gist.githubusercontent.com/mdecycu/d9082d678096bd58378d6afe2c7fa05d/raw/f7a85d737d6723d5e34c526d5daee990ed92c32b/kmol_snakey.py"
bsnake = button2(bsnake_url)
doc["bsnake"].bind("click", bsnake.do)
################################## bsnake end
################################## aitetris start
aitetris_url = "https://gist.githubusercontent.com/mdecycu/d9082d678096bd58378d6afe2c7fa05d/raw/f7a85d737d6723d5e34c526d5daee990ed92c32b/pygame_to_brython_tetris_ai.py"
aitetris = button2(aitetris_url)
doc["aitetris"].bind("click", aitetris.do)
################################## aitetris end
</script>
</p>
<p><!-- add 1 to 100 part2 çµæŸ--></p>
<!-- editor2 é–‹å§‹ -->
<p><!-- ç”¨ä¾†é¡¯ç¤ºç¨‹å¼ç¢¼çš„ editor å€åŸŸ --></p>
<div id="kw_editor2" style="width: 600px; height: 300px;"></div>
<p><!-- ä»¥ä¸‹çš„è¡¨å–®èˆ‡æŒ‰éˆ•èˆ‡å‰é¢çš„ Javascript doSave å‡½å¼ä»¥åŠ FileSaver.min.js äº’ç›¸é…åˆ --></p>
<p><!-- å­˜æ“‹è¡¨å–®é–‹å§‹ --></p>
<form><label>Filename: <input id="kw_filename2" placeholder="input file name" type="text"/>.py</label> <input onclick="doSave('kw_py_src2', 'kw_filename2');" type="submit" value="Save"/></form>
<p><!-- å­˜æ“‹è¡¨å–®çµæŸ --></p>
<p></p>
<p><!-- åŸ·è¡Œèˆ‡æ¸…é™¤æŒ‰éˆ•é–‹å§‹ --></p>
<p><button id="kw_run2">Run</button> <button id="kw_show_console2">Output</button> <button id="kw_clear_console2">æ¸…é™¤è¼¸å‡ºå€</button><button id="clear_bd2">æ¸…é™¤ç¹ªåœ–å€</button><button onclick="window.location.reload()">Reload</button></p>
<p><!-- åŸ·è¡Œèˆ‡æ¸…é™¤æŒ‰éˆ•çµæŸ --></p>
<p></p>
<p><!-- ç¨‹å¼åŸ·è¡Œ ouput å€ --></p>
<div style="width: 100%; height: 100%;"><textarea autocomplete="off" id="kw_console2"></textarea></div>
<p><!-- Brython ç¨‹å¼åŸ·è¡Œçš„çµæœ, éƒ½ä»¥ brython_div1 ä½œç‚ºåˆ‡å…¥ä½ç½® --></p>
<div id="brython_div2"></div>
<!-- editor2 çµæŸ --><hr/>
<p></p>
<h2>Brython</h2>
<p><a href="https://mde.tw/cp2025/content/Brython.html?src=https://gist.githubusercontent.com/mdecycu/ec4bb35dd0769e7a83d2a9fa57878a67/raw/9d55811467e411eb89f74171d8a586ae9f1a96aa/brython_robot_free_walk.py">æ©Ÿå™¨äººè‡ªç”±è¡Œ</a></p>
<p>Can we bring pythonpad into this page?Â <a href="https://pythonpad.github.io/docs/manual.html">https://pythonpad.github.io/docs/manual.html</a>Â </p>
<pre class="brush:py;auto-links:false;toolbar:false" contenteditable="false">from browser import document, html, timer
 
canvas = html.CANVAS(width=400, height=400)
brython_div = document["brython_div1"]
brython_div &lt;= canvas
ctx = canvas.getContext("2d")
 
def draw_grid():
    ctx.clearRect(0, 0, 400, 400)
    ctx.strokeStyle = "#ccc"
    ctx.lineWidth = 1
    for i in range(0, 401, 40):
        ctx.beginPath()
        ctx.moveTo(i, 0)
        ctx.lineTo(i, 400)
        ctx.stroke()
        ctx.beginPath()
        ctx.moveTo(0, i)
        ctx.lineTo(400, i)
        ctx.stroke()
    
    # ç•«å‡ºé‚Šç•Œ
    ctx.strokeStyle = "black"
    ctx.lineWidth = 2
    ctx.strokeRect(0, 0, 400, 400)

def draw_robot(x, y):
    draw_grid()
    ctx.fillStyle = "blue"
    ctx.beginPath()
    ctx.arc(x * 40 + 20, y * 40 + 20, 15, 0, 6.28)
    ctx.fill()

x, y = 0, 0
def move():
    global x
    x = (x + 1) % 10
    draw_robot(x, y)

draw_grid()
timer.set_interval(move, 500)</pre>
<p>ä»¥ä¸‹ç¨‹å¼, æŒ‰ j éš¨ç®­é ­æ–¹å‘å‰é€², æŒ‰ä¸‹ i å‰‡å·¦è½‰</p>
<pre class="brush:py;auto-links:false;toolbar:false" contenteditable="false">from browser import document, html, bind

canvas = html.CANVAS(width=400, height=400)
brython_div = document["brython_div1"]
brython_div &lt;= canvas
ctx = canvas.getContext("2d")

cols, rows = 10, 10
cell = 40

# ä¸Šã€å³ã€ä¸‹ã€å·¦
directions = [(0, -1), (1, 0), (0, 1), (-1, 0)]

robot = {
    "x": 5,
    "y": 5,
    "dir": 0  # åˆå§‹æœå‘ä¸Š
}

def draw_grid():
    ctx.clearRect(0, 0, 400, 400)
    ctx.strokeStyle = "#ccc"
    ctx.lineWidth = 1
    for i in range(0, 401, cell):
        ctx.beginPath()
        ctx.moveTo(i, 0)
        ctx.lineTo(i, 400)
        ctx.stroke()
        ctx.beginPath()
        ctx.moveTo(0, i)
        ctx.lineTo(400, i)
        ctx.stroke()
    ctx.strokeStyle = "black"
    ctx.lineWidth = 2
    ctx.strokeRect(0, 0, 400, 400)

def draw_robot():
    draw_grid()
    cx = robot["x"] * cell + cell // 2
    cy = robot["y"] * cell + cell // 2
    size = 15
    d = robot["dir"]

    ctx.fillStyle = "blue"
    ctx.beginPath()
    if d == 0:  # ä¸Š
        ctx.moveTo(cx, cy - size)
        ctx.lineTo(cx - size, cy + size)
        ctx.lineTo(cx + size, cy + size)
    elif d == 1:  # å³
        ctx.moveTo(cx + size, cy)
        ctx.lineTo(cx - size, cy - size)
        ctx.lineTo(cx - size, cy + size)
    elif d == 2:  # ä¸‹
        ctx.moveTo(cx, cy + size)
        ctx.lineTo(cx - size, cy - size)
        ctx.lineTo(cx + size, cy - size)
    elif d == 3:  # å·¦
        ctx.moveTo(cx - size, cy)
        ctx.lineTo(cx + size, cy - size)
        ctx.lineTo(cx + size, cy + size)
    ctx.closePath()
    ctx.fill()

@bind(document, "keydown")
def on_key(e):
    key = e.key.lower()
    if key == "i":
        robot["dir"] = (robot["dir"] - 1) % 4  # å·¦è½‰
    elif key == "j":
        dx, dy = directions[robot["dir"]]
        nx = robot["x"] + dx
        ny = robot["y"] + dy
        if 0 &lt;= nx &lt; cols and 0 &lt;= ny &lt; rows:
            robot["x"] = nx
            robot["y"] = ny
    draw_robot()

draw_robot()</pre>
<p>Optimization:</p>
<p>é¡Œç›®:<br/>ä¸€ä½è£½é€ å•†æƒ³è¨­è¨ˆä¸€å€‹é–‹å£å¼çš„ç›’å­ï¼Œå…¶åº•éƒ¨ç‚ºé•·æ–¹å½¢ï¼Œå¯¬ç‚º xã€é•·ç‚º yï¼Œä¸”ç¸½è¡¨é¢ç©ç‚º 80 å¹³æ–¹å…¬åˆ†ã€‚ è«‹å•è¦ä½¿ç›’å­çš„é«”ç©é”åˆ°æœ€å¤§ï¼Œæ‡‰è©²é¸ç”¨å“ªäº›å°ºå¯¸ï¼Ÿ</p>
<p>ç›´æ¥åˆ©ç”¨ Python ä»¥ <a href="https://en.wikipedia.org/wiki/Differential_evolution">Differential Evoluation</a> é‹ç®—:Â <a href="/downloads/de_volume_max.py">de_volume_max.py</a></p>
<p style="padding-left: 30px;">åƒè€ƒ:Â </p>
<p style="padding-left: 60px;"><a href="/downloads/de_volume_max.c">de_volume_max.c</a>,Â <a href="/downloads/de_volume_max.v">de_volume_max.v</a></p>
<p>ä¹Ÿå¯ä»¥æ¡ç¶²é å‰ç«¯ä½¿ç”¨ Brythonï¼Œå¾Œç«¯æ¡ Python åŸ·è¡Œé‹ç®—å¾Œå°‡è³‡æ–™å‚³å›ç¶²é :Â <a href="/downloads/brython_w_flask.7z">brython_w_flask.7z</a></p>
<h1>PyodideæŒ‡ä»¤å€</h1>
<p>
<script src="https://cdn.jsdelivr.net/pyodide/v0.26.4/full/pyodide.js"></script>
</p>
<p><button id="version">version</button> <button id="hello_button">hello</button> <button id="add1to100">1 add to 100</button> <button id="robot1">æ©Ÿå™¨äººå·¡é‚</button><button id="free_walk">è‡ªç”±è¡Œ</button> <button id="numpy_ode">numpy_ode</button></p>
<!-- Ace Editor Scripts -->
<p>
<script src="/static/ace/FileSaver.min.js"></script>
<script src="/static/ace/filereader.js"></script>
<script src="/static/ace/ace.js"></script>
<script src="/static/ace/ext-language_tools.js"></script>
<script src="/static/ace/mode-python.js"></script>
<script src="/static/ace/snippets/python.js"></script>
</p>
<!-- Editor 1 -->
<div id="kw_editor1" style="width: 600px; height: 300px;"></div>
<p><button id="kw_run1">Run</button> <button id="kw_output1">Output</button> <button id="kw_clear_console1">æ¸…é™¤è¼¸å‡ºå€</button> <button onclick="location.reload()">Reload</button></p>
<p><textarea id="kw_console1"></textarea></p>
<div id="pyodide_div1"></div>
<div id="mpl_output1"></div>
<div id="brython_div1"></div>
<hr/>
<p>å¾ 1 ç´¯åŠ åˆ° 100 part2:</p>
<p><button id="add1to100part2">1 add to 100</button></p>
<!-- Editor 2 -->
<div id="kw_editor2" style="width: 600px; height: 300px;"></div>
<p><button id="kw_run2">Run</button> <button id="kw_output2">Output</button> <button id="kw_clear_console2">æ¸…é™¤è¼¸å‡ºå€</button> <button onclick="location.reload()">Reload</button></p>
<p><textarea id="kw_console2"></textarea></p>
<div id="pyodide_div2"></div>
<div id="mpl_output2"></div>
<div id="brython_div2"></div>
<p>
<script>
function getUrlParam(key) {
  return new URLSearchParams(window.location.search).get(key);
}
function updateUrlParam(key, value) {
  const url = new URL(window.location);
  url.searchParams.set(key, value);
  window.history.replaceState({}, "", url);
}

let pyodide, editor1, editor2;

document.addEventListener("DOMContentLoaded", async () => {
  editor1 = ace.edit("kw_editor1");
  editor1.setTheme("ace/theme/chrome");
  editor1.session.setMode("ace/mode/python");

  editor2 = ace.edit("kw_editor2");
  editor2.setTheme("ace/theme/chrome");
  editor2.session.setMode("ace/mode/python");

  pyodide = await loadPyodide();
  await pyodide.loadPackage(["numpy", "scipy", "matplotlib", "micropip"]);

  // å®šç¾© hello() æ¨¡çµ„
  const code = `
def hello():
    print("Hello from custom module!")
`;
  pyodide.runPython(code);

  const GIST_ADD1TO100 =
    "https://gist.githubusercontent.com/mdecourse/0229a8a017091476a79700b8a190f185/raw/" +
    "c48e37714f055c3a0027cbfef59e442a6ef659b9/from_1_add_to_100_1.py";
  const NUMPY_ODE =
    "https://gist.githubusercontent.com/mdecycu/ec4bb35dd0769e7a83d2a9fa57878a67/raw/" +
    "98d582539545b3c9fbfa35dd3e605c506367618e/pyodide_ode_ex1.py";
  const PYODIDE_ROBOT_ANIMATION =
    "https://gist.githubusercontent.com/mdecycu/ec4bb35dd0769e7a83d2a9fa57878a67/raw/" +
    "f3d75d08f2b90f4470342e91ee1e5c36b5f950bf/pyodide_robot_ex1.py";
  const FREE_WALK = 
    "https://gist.githubusercontent.com/mdecycu/ec4bb35dd0769e7a83d2a9fa57878a67/raw/" + "d1659628afe5d36a026ef305dc639f6be4c9f608/pyodide_robot_ex3.py"

  const src = getUrlParam("src");
  if (src === PYODIDE_ROBOT_ANIMATION) {
    const robotCode = await fetchCode(PYODIDE_ROBOT_ANIMATION);
    editor1.setValue(robotCode, -1);
    updateUrlParam("src", PYODIDE_ROBOT_ANIMATION);
    runPyodide(editor1, "kw_console1", "brython_div1");
  } else {
    const initialCode = await fetchCode(src || GIST_ADD1TO100);
    editor1.setValue(initialCode, -1);
    runPyodide(editor1, "kw_console1", "brython_div1");
  }

  editor2.setValue("", -1);

  document.getElementById("version").onclick = () => {
    const vcode = `
import pyodide
import sys
import matplotlib
import numpy
import scipy
print("Pyodide version:", pyodide.__version__)
print("Python version :", sys.version)
print("matplotlib version:", matplotlib.__version__)
print("numpy version:", numpy.__version__)
print("scipy version:", scipy.__version__)
`;
    editor1.setValue(vcode, -1);
    updateUrlParam("src", "inline_version");
    runPyodide(editor1, "kw_console1", "brython_div1");
  };

  document.getElementById("hello_button").onclick = () => {
    editor1.setValue("hello()", -1);
    updateUrlParam("src", "inline_hello");
    runPyodide(editor1, "kw_console1", "brython_div1");
  };

  document.getElementById("add1to100").onclick = async () => {
    const c = await fetchCode(GIST_ADD1TO100);
    editor1.setValue(c, -1);
    updateUrlParam("src", GIST_ADD1TO100);
    runPyodide(editor1, "kw_console1", "brython_div1");
  };

  document.getElementById("numpy_ode").onclick = async () => {
    const c = await fetchCode(NUMPY_ODE);
    editor1.setValue(c, -1);
    updateUrlParam("src", NUMPY_ODE);
    runPyodide(editor1, "kw_console1", "brython_div1");
  };

  document.getElementById("robot1").onclick = async () => {
    const rc = await fetchCode(PYODIDE_ROBOT_ANIMATION);
    editor1.setValue(rc, -1);
    updateUrlParam("src", PYODIDE_ROBOT_ANIMATION);
    runPyodide(editor1, "kw_console1", "brython_div1");
  };

  document.getElementById("free_walk").onclick = async () => {
    const rc = await fetchCode(FREE_WALK);
    editor1.setValue(rc, -1);
    updateUrlParam("src", FREE_WALK);
    runPyodide(editor1, "kw_console1", "brython_div1");
  };

  document.getElementById("add1to100part2").onclick = async () => {
    const c = await fetchCode(GIST_ADD1TO100);
    editor2.setValue(c, -1);
    runPyodide(editor2, "kw_console2", "brython_div2");
  };

  document.getElementById("kw_run1").onclick = () =>
    runPyodide(editor1, "kw_console1", "brython_div1");
  document.getElementById("kw_run2").onclick = () =>
    runPyodide(editor2, "kw_console2", "brython_div2");
  document.getElementById("kw_clear_console1").onclick = () =>
    clearOutput("kw_console1", "brython_div1");
  document.getElementById("kw_clear_console2").onclick = () =>
    clearOutput("kw_console2", "brython_div2");
});

// è™•ç†å…©å€‹ Output åˆ—æ•¸
  document.getElementById("kw_output1").onclick = () => {
    const ta = document.getElementById("kw_console1");
    ta.rows = "15";
    ta.cols = "70";
    ta.scrollTop = 0;
  };
  document.getElementById("kw_output2").onclick = () => {
    const ta = document.getElementById("kw_console2");
    ta.rows = "15";
    ta.cols = "70";
    ta.scrollTop = 0;
  };

async function fetchCode(url) {
  const r = await fetch(url);
  if (!r.ok) throw new Error(`è¼‰å…¥å¤±æ•— ${r.status}`);
  return await r.text();
}

function clearOutput(consoleId, divId) {
  document.getElementById(consoleId).value = "";
  document.getElementById(divId).innerHTML = "";
}

async function runPyodide(editor, consoleId, divId) {
  document.getElementById(consoleId).value = "";
  document.getElementById(divId).innerHTML = "";

  await pyodide.runPythonAsync(`
import sys
class JsWriter:
  def write(self, s):
    from js import document
    ta = document.getElementById("${consoleId}")
    ta.value += s
    ta.scrollTop = ta.scrollHeight
sys.stdout = JsWriter()
sys.stderr = JsWriter()
`);

  try {
    await pyodide.runPythonAsync(editor.getValue());
  } catch (e) {
    document.getElementById(consoleId).value += "\néŒ¯èª¤ï¼š" + e.toString();
  }
}
</script>
</p>
<h2>Pyodide</h2>
<p><a href="https://mde.tw/cp2025/content/Pyodide.html?src=https://gist.githubusercontent.com/mdecycu/ec4bb35dd0769e7a83d2a9fa57878a67/raw/f3d75d08f2b90f4470342e91ee1e5c36b5f950bf/pyodide_robot_ex1.py">Pyodide æ©Ÿå™¨äººå·¡é‚</a></p>
<p>Pyodide å°å…¥å®¢è£½åŒ–æ¨¡çµ„:</p>
<pre class="brush:js;auto-links:false;toolbar:false" contenteditable="false">const code = `
# å®šç¾©ä¸€å€‹æ¨¡çµ„å…§å®¹
def hello():
    print("Hello from custom module!")
`;
pyodide.runPython(code);
</pre>
<p><a href="https://mde.tw/cp2025/content/Pyodide.html?src=https://gist.githubusercontent.com/mdecycu/ec4bb35dd0769e7a83d2a9fa57878a67/raw/3ed6869dcd7312254513ca507de17945e15a9b6f/box_max_volume_short.py">Volume_max_pyodide_de_short.py</a></p>
<p><a href="https://mde.tw/cp2025/content/Pyodide.html?src=https://gist.githubusercontent.com/mdecycu/ec4bb35dd0769e7a83d2a9fa57878a67/raw/3ed6869dcd7312254513ca507de17945e15a9b6f/box_volume_max_pyodide_de.py">Volume_max_pyodide_de.py</a></p>
<p></p>
<h1>å­¤ç¨çµ„é•·...</h1>
<h2>çµ„å“¡å¤±è¹¤+å‰å¸³è™Ÿè¢«å°é–QQ</h2>
<p>ä»¥ä¸‹æ˜¯æˆ‘ç¨ç«‹å¥®é¬¥çš„éç¨‹+å†æˆ°çš„æˆæœ!!!!!</p>
<p></p>
<h1>w12</h1>
<h2>åœ‹æ——æ—‹è½‰</h2>
<p># ç•«ä¸­è¯æ°‘åœ‹åœ‹æ——ï¼Œä¸¦å±•ç¤º 90 åº¦èˆ‡ 45 åº¦é †æ™‚é‡æ—‹è½‰<br/># å°å…¥ doc<br/>from browser import document as doc<br/># ä»¥ä¸‹å°‡åˆ©ç”¨ html ç”¢ç”Ÿæ‰€éœ€çš„ç¹ªåœ–ç•«å¸ƒ<br/>from browser import html<br/># åˆ©ç”¨ math å‡½å¼åº«åŸ·è¡Œä¸‰è§’å‡½æ•¸é‹ç®—<br/>import math</p>
<p># --- ç•«å¸ƒèˆ‡ç’°å¢ƒè¨­å®š ---</p>
<p># å®šç¾©ç•«å¸ƒå°ºå¯¸<br/>FLAG_W = 600<br/>FLAG_H = 400<br/># æ—‹è½‰ä¸­å¿ƒé»<br/>CENTER_X = FLAG_W / 2<br/>CENTER_Y = FLAG_H / 2</p>
<p># å°‡ç•«å¸ƒæ·»åŠ åˆ° id ç‚º brython_div1 çš„ HTML å…ƒç´ ä¸­<br/>brython_div = doc["brython_div1"]</p>
<p># å‰µå»ºæ¨™ç±¤å’Œç•«å¸ƒ<br/>brython_div &lt;= html.H3("åŸå§‹åœ‹æ—— (600x400)")<br/>canvas_orig = html.CANVAS(width = FLAG_W, height = FLAG_H, id = "flag_orig", style = {"border": "1px solid #ccc"})<br/>brython_div &lt;= canvas_orig</p>
<p>brython_div &lt;= html.H3("é †æ™‚é‡æ—‹è½‰ 90 åº¦")<br/>canvas_90 = html.CANVAS(width = FLAG_W, height = FLAG_H, id = "flag_90", style = {"border": "1px solid #ccc"})<br/>brython_div &lt;= canvas_90</p>
<p>brython_div &lt;= html.H3("é †æ™‚é‡æ—‹è½‰ 45 åº¦")<br/>canvas_45 = html.CANVAS(width = FLAG_W, height = FLAG_H, id = "flag_45", style = {"border": "1px solid #ccc"})<br/>brython_div &lt;= canvas_45</p>
<p># --- æ ¸å¿ƒç¹ªåœ–å‡½æ•¸ (åœ‹æ——å…§å®¹) ---<br/>def draw_flag_content(ctx):<br/> """ç¹ªè£½æœªæ—‹è½‰ç‹€æ…‹çš„åœ‹æ——å…§å®¹ï¼Œæ‰€æœ‰åº§æ¨™éƒ½æ˜¯åŸºæ–¼ (0, 0) èµ·é»"""<br/> flag_w = FLAG_W<br/> flag_h = FLAG_H<br/> <br/> # é’å¤©ç™½æ—¥åœ–æ¡ˆçš„ä¸­å¿ƒåº§æ¨™ (ä½æ–¼å·¦ä¸Šå››åˆ†ä¹‹ä¸€è™•)<br/> circle_x = flag_w/4<br/> circle_y = flag_h/4<br/> star_radius = flag_w/8 # ç™½æ—¥å…‰èŠ’åŠå¾‘</p>
<p># 1. æ»¿åœ°ç´… (Red Earth)<br/> ctx.fillStyle='rgb(255, 0, 0)'<br/> ctx.fillRect(0,0,flag_w,flag_h)</p>
<p># 2. é’å¤© (Blue Sky)<br/> ctx.fillStyle='rgb(0, 0, 150)'<br/> ctx.fillRect(0,0,flag_w/2,flag_h/2)</p>
<p># 3. åäºŒé“å…‰èŠ’ç™½æ—¥ (White Sun with Twelve Rays) - æ¡ç”¨åŸç¨‹å¼ç¢¼é‚è¼¯<br/> ctx.beginPath()<br/> angle = 0<br/> for i in range(24):<br/> # æ¡ç”¨åŸå§‹ç¨‹å¼ç¢¼ä¸­ä¸å¸¸è¦‹çš„è§’åº¦æ­¥é€²ï¼Œç¢ºä¿æ—‹è½‰å‰å¾Œå½¢ç‹€ä¸€è‡´<br/> angle += 5*math.pi*2/12 <br/> toX = circle_x + math.cos(angle)*star_radius<br/> toY = circle_y + math.sin(angle)*star_radius<br/> if (i):<br/> ctx.lineTo(toX, toY)<br/> else:<br/> ctx.moveTo(toX, toY)<br/> ctx.closePath()<br/> ctx.fillStyle = '#fff'<br/> ctx.fill()</p>
<p># 4. ç™½æ—¥:è—åœˆ (Blue Ring)<br/> ctx.beginPath()<br/> # åŸå§‹åŠå¾‘: flag_w * 17 / 240<br/> ctx.arc(circle_x, circle_y, flag_w*17/240, 0, math.pi*2, True)<br/> ctx.closePath()<br/> ctx.fillStyle = 'rgb(0, 0, 149)'<br/> ctx.fill()</p>
<p># 5. ç™½æ—¥:ç™½å¿ƒ (White Center)<br/> ctx.beginPath()<br/> # åŸå§‹åŠå¾‘: flag_w / 16<br/> ctx.arc(circle_x, circle_y, flag_w/16, 0, math.pi*2, True)<br/> ctx.closePath()<br/> ctx.fillStyle = '#fff'<br/> ctx.fill()</p>
<p># --- ç¹ªè£½å‡½æ•¸ï¼šåŸå§‹åœ‹æ—— ---<br/>def draw_original_flag():<br/> ctx = doc["flag_orig"].getContext("2d")<br/> draw_flag_content(ctx)</p>
<p># --- ç¹ªè£½å‡½æ•¸ï¼šé †æ™‚é‡æ—‹è½‰ 90 åº¦ ---<br/>def draw_90_degree_flag():<br/> ctx = doc["flag_90"].getContext("2d")<br/> <br/> # 1. å„²å­˜ç•¶å‰ç‹€æ…‹<br/> ctx.save()<br/> <br/> # 2. å¹³ç§»åŸé»åˆ°ç•«å¸ƒä¸­å¿ƒ (600/2, 400/2) = (300, 200)<br/> ctx.translate(CENTER_X, CENTER_Y)<br/> <br/> # 3. æ—‹è½‰ 90 åº¦ (Ï€/2) é †æ™‚é‡<br/> ctx.rotate(math.pi / 2)<br/> <br/> # 4. å°‡åŸé»å¹³ç§»å›å»ï¼Œä»¥ä¾¿åœ‹æ——å…§å®¹ä»¥ (0, 0) ç‚ºèµ·é»ç¹ªè£½<br/> ctx.translate(-CENTER_X, -CENTER_Y)<br/> <br/> # 5. ç¹ªè£½åœ‹æ——å…§å®¹<br/> draw_flag_content(ctx)<br/> <br/> # 6. æ¢å¾©ç‹€æ…‹<br/> ctx.restore()</p>
<p># --- ç¹ªè£½å‡½æ•¸ï¼šé †æ™‚é‡æ—‹è½‰ 45 åº¦ ---<br/>def draw_45_degree_flag():<br/> ctx = doc["flag_45"].getContext("2d")<br/> <br/> # 1. å„²å­˜ç•¶å‰ç‹€æ…‹<br/> ctx.save()<br/> <br/> # 2. å¹³ç§»åŸé»åˆ°ç•«å¸ƒä¸­å¿ƒ<br/> ctx.translate(CENTER_X, CENTER_Y)<br/> <br/> # 3. æ—‹è½‰ 45 åº¦ (Ï€/4) é †æ™‚é‡<br/> ctx.rotate(math.pi / 4)<br/> <br/> # 4. å°‡åŸé»å¹³ç§»å›å»<br/> ctx.translate(-CENTER_X, -CENTER_Y)<br/> <br/> # 5. ç¹ªè£½åœ‹æ——å…§å®¹<br/> draw_flag_content(ctx)<br/> <br/> # 6. æ¢å¾©ç‹€æ…‹<br/> ctx.restore()</p>
<p># --- åŸ·è¡Œç¹ªåœ– ---<br/>draw_original_flag()<br/>draw_90_degree_flag()<br/>draw_45_degree_flag()</p>
<h2>æ©Ÿå™¨äººä¸ƒæ®µç¨‹å¼ç¢¼</h2>
<p></p>
<p>#è«‹ä¿®æ­£ä»¥ä¸‹ç¨‹å¼è®“æ©Ÿå™¨äººå¯ä»¥èµ°å‡ºä¸ƒæ®µé¡¯ç¤ºå™¨æ ¼å¼çš„æ•¸å­—<br/>from robot_lib import World as BaseWorld, AnimatedRobot as BaseRobot, timer, CELL_SIZE</p>
<p># --- 1. å®šç¾©ä¸–ç•Œï¼ˆåŠ å…¥ç´°æ ¼ï¼‰ ---<br/>class MyWorld(BaseWorld):<br/> def __init__(self, width=10, height=10, sub_cell=5):<br/> super().__init__(width, height)<br/> self.sub_cell = sub_cell<br/> self.sub_size = CELL_SIZE // sub_cell<br/> self._draw_fine_grid()</p>
<p>def _draw_fine_grid(self):<br/> ctx = self.layers["grid"].getContext("2d")<br/> ctx.strokeStyle = "#e0e0e0"<br/> ctx.lineWidth = 0.5<br/> # ç•«å‚ç›´ç´°ç·š<br/> for i in range(self.width * self.sub_cell + 1):<br/> x = i * self.sub_size<br/> ctx.beginPath(); ctx.moveTo(x, 0); ctx.lineTo(x, self.height * CELL_SIZE); ctx.stroke()<br/> # ç•«æ°´å¹³ç´°ç·š<br/> for j in range(self.height * self.sub_cell + 1):<br/> y = j * self.sub_size<br/> ctx.beginPath(); ctx.moveTo(0, y); ctx.lineTo(self.width * CELL_SIZE, y); ctx.stroke()</p>
<p># ç´°æ ¼åº§æ¨™è½‰æ›ç‚ºåƒç´ åº§æ¨™<br/> def sub_to_px(self, sub_x, sub_y):<br/> big_x = sub_x // self.sub_cell<br/> big_y = sub_y // self.sub_cell<br/> offset_x = (sub_x % self.sub_cell) * self.sub_size<br/> <br/> # ä¿®æ­£é» 1: åè½‰ç´°æ ¼å…§ Y åç§»é‡ (oy)ï¼Œä½¿ sub_y è¶Šå¤§ (å¾€ä¸‹)ï¼Œpy è¶Šå¤§ (è¢å¹•ä¸Šå¾€ä¸‹)ã€‚<br/> # é€™ç¢ºä¿äº†æˆ‘å€‘å°‡ (sub_x, sub_y) è¦–ç‚º Y è»¸å‘ä¸‹å¢åŠ çš„ç¶²æ ¼åº§æ¨™ã€‚<br/> sub_y_offset = sub_y % self.sub_cell<br/> offset_y = (self.sub_cell - 1 - sub_y_offset) * self.sub_size<br/> <br/> px = big_x * CELL_SIZE + offset_x + self.sub_size // 2<br/> <br/> # BaseWorld çš„ Y è»¸æ˜¯å¾ä¸‹å¾€ä¸Šã€‚<br/> # ç¸½åƒç´  Y åº§æ¨™ (py) ä»ç„¶éœ€è¦åè½‰ big_yï¼Œä»¥åŒ¹é…è¢å¹•åº§æ¨™ï¼ˆY è»¸å‘ä¸‹ï¼‰ã€‚<br/> py = (self.height - 1 - big_y) * CELL_SIZE + offset_y + self.sub_size // 2<br/> return px, py</p>
<p># åœ¨ç´°æ ¼åº§æ¨™ä¸Šç•«ç·š<br/> def draw_line(self, x1, y1, x2, y2):<br/> ctx = self.layers["objects"].getContext("2d")<br/> ctx.strokeStyle = "#d33"<br/> ctx.lineWidth = 9<br/> ctx.lineCap = "round"<br/> ctx.beginPath()<br/> ctx.moveTo(*self.sub_to_px(x1, y1))<br/> ctx.lineTo(*self.sub_to_px(x2, y2))<br/> ctx.stroke()</p>
<p># --- 2. å®šç¾©æ©Ÿå™¨äººï¼ˆä»¥ç´°æ ¼ç§»å‹•ï¼‰ ---<br/>class MyRobot(BaseRobot):<br/> def __init__(self, world, start_big_x=1, start_big_y=1):<br/> super().__init__(world, start_big_x, start_big_y)<br/> # åˆå§‹ä½ç½®è½‰æ›ç‚ºç´°æ ¼ä¸­å¿ƒ<br/> self.sub_x = start_big_x * world.sub_cell + world.sub_cell // 2<br/> self.sub_y = start_big_y * world.sub_cell + world.sub_cell // 2<br/> self.robot_size = world.sub_size * 1.8</p>
<p># é‡æ–°ç¹ªè£½æ©Ÿå™¨äººï¼ˆä½¿ç”¨ç´°æ ¼åº§æ¨™ï¼‰<br/> def _draw_robot(self):<br/> self.robot_ctx.clearRect(0, 0, self.world.width * CELL_SIZE, self.world.height * CELL_SIZE)<br/> img = self.images[self.facing]<br/> px, py = self.world.sub_to_px(self.sub_x, self.sub_y)<br/> s = self.robot_size<br/> if img.complete:<br/> self.robot_ctx.drawImage(img, px - s//2, py - s//2, s, s)</p>
<p># ç¬é–“ç§»å‹•ï¼ˆä¸ç•«ç·šï¼‰<br/> def teleport_to(self, tx, ty):<br/> def action(done):<br/> self.sub_x, self.sub_y = tx, ty<br/> self._draw_robot()<br/> timer.set_timeout(done, 10)<br/> self.queue.append(action)<br/> self._run_queue()</p>
<p># ç§»å‹• + ç•«ç·šï¼ˆæœ€æ ¸å¿ƒï¼‰<br/> def move_to(self, tx, ty, draw_trace=True):<br/> def action(done):<br/> def step():<br/> if self.sub_x == tx and self.sub_y == ty:<br/> done(); return<br/> prev_x, prev_y = self.sub_x, self.sub_y</p>
<p># è¨ˆç®—æ–¹å‘ä¸¦è½‰å‘ (ç¶­æŒåŸå§‹ç¨‹å¼çš„é‚è¼¯ï¼Œå› å…¶ä¸»è¦ä¿®æ­£é»ä¸åœ¨é€™è£¡)<br/> dx = tx - self.sub_x<br/> dy = ty - self.sub_y<br/> if dx &gt; 0: target = "E"<br/> elif dx &lt; 0: target = "W"<br/> elif dy &gt; 0: target = "N"<br/> else: target = "S"</p>
<p># åŒæ­¥è½‰å‘ï¼ˆå®‰å…¨ç‰ˆï¼‰<br/> while self.facing != target:<br/> idx = self.facing_order.index(self.facing)<br/> self.facing = self.facing_order[(idx + 1) % 4]</p>
<p># ç§»å‹•ä¸€æ­¥<br/> self.sub_x += 1 if dx &gt; 0 else (-1 if dx &lt; 0 else 0)<br/> self.sub_y += 1 if dy &gt; 0 else (-1 if dy &lt; 0 else 0)</p>
<p>if draw_trace:<br/> self.world.draw_line(prev_x, prev_y, self.sub_x, self.sub_y)<br/> self._draw_robot()<br/> # èª¿æ•´é€Ÿåº¦ï¼Œè®“ç·šæ¢æ›´å¹³æ»‘<br/> timer.set_timeout(step, 40)<br/> step()<br/> self.queue.append(action)<br/> self._run_queue()</p>
<p># --- 3. ä¸ƒæ®µé¡¯ç¤ºå™¨å®šç¾© ---<br/>SEGMENTS = {<br/> 0:[1,1,1,1,1,1,0], 1:[0,1,1,0,0,0,0], 2:[1,1,0,1,1,0,1],<br/> 3:[1,1,1,1,0,0,1], 4:[0,1,1,0,0,1,1], 5:[1,0,1,1,0,1,1],<br/> 6:[1,0,1,1,1,1,1], 7:[1,1,1,0,0,0,0], 8:[1,1,1,1,1,1,1],<br/> 9:[1,1,1,1,0,1,1]<br/>}</p>
<p># æ¯å€‹ç·šæ®µçš„ç´°æ ¼åº§æ¨™è·¯å¾‘ï¼ˆç›¸å°åº§æ¨™ï¼‰<br/># ä¸ƒæ®µé¡¯ç¤ºå™¨çµæ§‹æ˜¯ç›¸å°åº§æ¨™ï¼Œé«˜åº¦ 7 ç´°æ ¼ (0-6)ï¼Œå¯¬åº¦ 4 ç´°æ ¼ (0-3)ã€‚<br/># é€™è£¡å®šç¾©çš„ PATHS ä»æ˜¯ Y è»¸å‘ä¸‹å¢åŠ  (Y=0 é ‚éƒ¨, Y=6 åº•éƒ¨)<br/>PATHS = [<br/> [(0,0),(1,0),(2,0),(3,0)], # A ä¸Š (Y=0)<br/> [(3,0),(3,1),(3,2),(3,3)], # B å³ä¸Š<br/> [(3,3),(3,4),(3,5),(3,6)], # C å³ä¸‹<br/> [(3,6),(2,6),(1,6),(0,6)], # D ä¸‹ (Y=6)<br/> [(0,6),(0,5),(0,4),(0,3)], # E å·¦ä¸‹<br/> [(0,3),(0,2),(0,1),(0,0)], # F å·¦ä¸Š<br/> [(0,3),(1,3),(2,3),(3,3)] # G ä¸­ (Y=3)<br/>]</p>
<p>def draw_digit(robot, digit, ox, oy):<br/> # ä¿®æ­£é» 2: å¼•å…¥ä¸ƒæ®µé¡¯ç¤ºå™¨çš„é«˜åº¦ (æœ€å¤§ Y åº§æ¨™)<br/> SEGMENT_HEIGHT = 6<br/> if digit not in SEGMENTS: return<br/> <br/> for i, on in enumerate(SEGMENTS[digit]):<br/> if not on: continue<br/> path = PATHS[i]<br/> <br/> # ä¿®æ­£é» 3: é€²è¡Œ Y åº§æ¨™åè½‰ï¼šy_fixed = oy + (SEGMENT_HEIGHT - relative_y)<br/> # å°‡ Y è»¸å‘ä¸‹å¢åŠ çš„ç›¸å°åº§æ¨™ (0-6) è½‰æ›ç‚º Y è»¸å‘ä¸Šå¢åŠ çš„ç¹ªåœ–åº§æ¨™ã€‚<br/> <br/> # åˆå§‹ä½ç½®<br/> start_x = ox + path[0][0]<br/> start_y = oy + (SEGMENT_HEIGHT - path[0][1]) # é—œéµåè½‰<br/> robot.teleport_to(start_x, start_y)<br/> <br/> for j in range(1, len(path)):<br/> tx = ox + path[j][0]<br/> ty = oy + (SEGMENT_HEIGHT - path[j][1]) # é—œéµåè½‰<br/> robot.move_to(tx, ty, draw_trace=True)</p>
<p># ==================== ä¸»ç¨‹å¼ï¼šç•« 0123456789 ====================<br/># ä¿®æ­£ World å¯¬åº¦ï¼Œä»¥å®¹ç´ 10 å€‹æ•¸å­— (10 * 6 å¯¬åº¦ + é‚Šè·)<br/>world = MyWorld(65, 10, sub_cell=5) <br/># å°‡æ©Ÿå™¨äººèµ·å§‹é»è¨­åœ¨ç´°æ ¼ (0, 0) é™„è¿‘<br/>robot = MyRobot(world, 0, 0)</p>
<p># Y è»¸åç§»é‡ oyï¼š<br/>START_Y_SUB_CELL = 1</p>
<p>for i in range(10):<br/> # æ¯å€‹æ•¸å­—çš„èµ·å§‹ X ç´°æ ¼åº§æ¨™ (æ¯å€‹æ•¸å­—å¯¬åº¦ 4ï¼Œé–“éš” 2ï¼Œå…± 6 å¯¬åº¦)<br/> start_x_offset = 1 + i * 6 <br/> draw_digit(robot, i, start_x_offset, START_Y_SUB_CELL)</p>
<p>print("æ©Ÿå™¨äººæ­£åœ¨å¯«å­—ï¼š0123456789 (å·²ä¿®æ­£åº§æ¨™åè½‰å•é¡Œ)")</p>
<p></p>
<h1>æœŸæœ«å ±å‘Š1(w14ä¸‰å€‹æ“ä½œ)</h1>
<h2><span data-teams="true">æ“ä½œä¸€ã€æ“ä½œäºŒ</span></h2>
<p><span data-teams="true">å½±ç‰‡:<a href="https://youtu.be/HyKCpGbWiek">https://youtu.be/HyKCpGbWiek</a></span></p>
<h2><span data-teams="true">ç¬¬äºŒå€‹ç¨‹å¼çš„åŸ·è¡Œ</span></h2>
<p><span data-teams="true"><span>å½±ç‰‡:</span><a href="https://youtu.be/gs6Zbh4u41A">https://youtu.be/gs6Zbh4u41A</a></span></p>
<h2><span data-teams="true">ç¬¬ä¸‰å€‹æ†¤æ€’é³¥å°éŠæˆ²</span></h2>
<p><span data-teams="true"><span>å½±ç‰‡:<a href="https://youtu.be/Mebi7DRFnMc">https://youtu.be/Mebi7DRFnMc</a></span></span></p>
<p><br/>æœŸæœ«å ±å‘Š2(<span data-teams="true"><span>ç¨‹å¼æ–°åŠŸèƒ½)</span></span></p>
<h2><span data-teams="true">ç¬¬äºŒå€‹ç¨‹å¼çš„æ”¹è‰¯</span></h2>
<p><span data-teams="true">ä»¥ä¸‹æ˜¯ç¬¬äºŒå€‹ç¨‹å¼çš„åŸå§‹ç¢¼åˆ†æ:</span></p>
<p><strong>ä¸€ã€æ•´é«”æ¶æ§‹ç¸½è¦½</strong></p>
<p>é€™æ˜¯ä¸€å€‹ï¼šFlask ç¶²é  + Brython å¯«çš„é»æ“Šå°éŠæˆ² + Ajax ä¸Šå‚³åˆ†æ•¸</p>
<p>ğŸ“Œ æŠ€è¡“è§’è‰²åˆ†å·¥ï¼š</p>
<p>æŠ€è¡“ ç”¨é€”<br/>Flask å¾Œç«¯ä¼ºæœå™¨ã€åˆ†æ•¸å„²å­˜<br/>Jinja2 HTML æ¨¡æ¿å¼•æ“<br/>Brython åœ¨ç€è¦½å™¨åŸ·è¡Œ Python<br/>JavaScript (Ajax) éåŒæ­¥é€åˆ†æ•¸<br/>HTML / CSS éŠæˆ²ç•«é¢</p>
<p><br/><strong>äºŒã€Jinja2 æ¨¡æ¿çµæ§‹èªªæ˜</strong></p>
<p>{% extends "base.html" %}</p>
<p>ğŸ”¹ ç¹¼æ‰¿ base.html</p>
<p>ä½¿ç”¨ Flask å¸¸è¦‹çš„ æ¨¡æ¿ç¹¼æ‰¿</p>
<p>base.html é€šå¸¸åŒ…å«ï¼š</p>
<p>&lt;html&gt;</p>
<p>&lt;head&gt;</p>
<p>å°è¦½åˆ—</p>
<p>å…±ç”¨ CSS<br/>{% block title %}Brython éŠæˆ²{% endblock %}<br/>ğŸ”¹ è¨­å®šé é¢æ¨™é¡Œ<br/>å°æ‡‰ base.html è£¡çš„ {% block title %}</p>
<p>ç€è¦½å™¨æ¨™é¡Œé¡¯ç¤ºã€ŒBrython éŠæˆ²ã€</p>
<p><br/>{% block content %} ... {% endblock %}<br/>ğŸ”¹ ä¸»å…§å®¹å€<br/>æ•´å€‹éŠæˆ²ç•«é¢éƒ½åœ¨é€™å€‹å€å¡Šå…§</p>
<p><strong>ä¸‰ã€è¼‰å…¥ Brython</strong></p>
<p>&lt;script src="https://cdn.jsdelivr.net/npm/brython@3.11.3/brython.min.js"&gt;&lt;/script&gt; &lt;script src="https://cdn.jsdelivr.net/npm/brython@3.11.3/brython_stdlib.js"&gt;&lt;/script&gt;<br/>ğŸ”¹ é€™å…©å€‹åšä»€éº¼ï¼Ÿ<br/>æª”æ¡ˆ åŠŸèƒ½<br/>brython.min.js Brython æ ¸å¿ƒ<br/>brython_stdlib.js Python æ¨™æº–å‡½å¼åº«<br/>ğŸ“Œ æ²’æœ‰å®ƒå€‘ï¼Œç€è¦½å™¨çœ‹ä¸æ‡‚ &lt;script type="text/python"&gt;</p>
<p><br/>&lt;body onload="brython(1)"&gt;<br/>ğŸ”¹ å•Ÿå‹• Brython<br/>ç¶²é è¼‰å…¥å®Œæˆ â†’ å•Ÿå‹• Brython</p>
<p>1 ä»£è¡¨ã€Œdebug æ¨¡å¼ã€</p>
<p><strong>å››ã€éŠæˆ²ç•«é¢ HTML</strong></p>
<p>&lt;h2 style="text-align: center;"&gt;ğŸ•¹ï¸ é»æ“Šæ¸¬è©¦ï¼šé»æ“Šç§»å‹•ä¸­çš„åœ“å½¢ï¼&lt;/h2&gt;<br/>â¡ï¸ éŠæˆ²æ¨™é¡Œ</p>
<p><br/>&lt;div id="brython_div1" style="width: 600px; height: 400px; margin: 20px auto;"&gt;&lt;/div&gt;<br/>ğŸ”¹ éŠæˆ²å ´åœ°<br/>å¯¬ï¼š600px</p>
<p>é«˜ï¼š400px</p>
<p>æ‰€æœ‰éŠæˆ²å…ƒç´ éƒ½å‹•æ…‹åŠ åˆ°é€™è£¡</p>
<p><strong>äº”ã€ç‚ºä»€éº¼è¦ç”¨ {% raw %}ï¼Ÿ</strong></p>
<p>{% raw %} &lt;script type="text/python"&gt;<br/>ğŸ”¹ è§£æ±ºçš„å•é¡Œ<br/>Brython è£¡æœ‰ï¼š</p>
<p>f"{score}"</p>
<p>{}</p>
<p>âš ï¸ Jinja2 æœƒèª¤ä»¥ç‚ºæ˜¯æ¨¡æ¿èªæ³•</p>
<p>â¡ï¸ {% raw %} å‘Šè¨´ Jinja2ï¼š</p>
<p>ã€Œé€™ä¸€æ®µæˆ‘ä¸è§£æï¼ŒåŸå°ä¸å‹•äº¤çµ¦ç€è¦½å™¨ã€</p>
<p><strong>å…­ã€Brythonï¼šåŒ¯å…¥æ¨¡çµ„</strong></p>
<p>from browser import document, timer, window, ajax import random import time<br/>ğŸ”¹ æ¯å€‹æ¨¡çµ„ç”¨é€”<br/>æ¨¡çµ„ åŠŸèƒ½<br/>document æ“ä½œ DOM<br/>timer setTimeout / setInterval<br/>window JS çš„ window<br/>ajax Ajax è«‹æ±‚<br/>random éš¨æ©Ÿä½ç½®ã€é¡è‰²<br/>time è¨ˆæ™‚</p>
<p><br/><strong>ä¸ƒã€éŠæˆ²å…¨åŸŸè¨­å®š</strong></p>
<p>GAME_DURATION = 30 score = 0 game_active = False<br/>è®Šæ•¸ èªªæ˜<br/>GAME_DURATION éŠæˆ²æ™‚é–“ï¼ˆç§’ï¼‰<br/>score ç©å®¶åˆ†æ•¸<br/>game_active æ˜¯å¦é€²è¡Œä¸­</p>
<p><br/><strong>å…«ã€åˆå§‹åŒ–éŠæˆ²å€ï¼ˆDOM æ“ä½œï¼‰</strong></p>
<p>game_area = document["brython_div1"]<br/>â¡ï¸ æŠ“å– &lt;div id="brython_div1"&gt;</p>
<p><br/>game_area.style.border = "3px solid #333" game_area.style.backgroundColor = "#e0e0ff" game_area.style.position = "relative"</p>
<p>ğŸ”¹ ç‚ºä»€éº¼è¦ position: relativeï¼Ÿ</p>
<p>ğŸ‘‰ è®“è£¡é¢çš„åœ“å½¢å¯ä»¥ç”¨ absolute å®šä½</p>
<p><strong>ä¹ã€åˆ†æ•¸èˆ‡æ™‚é–“é¡¯ç¤ºå€</strong></p>
<p>score_display = document.createElement("div") timer_display = document.createElement("div")<br/>å·¦ä¸Šè§’ï¼šåˆ†æ•¸</p>
<p>å³ä¸Šè§’ï¼šå€’æ•¸æ™‚é–“</p>
<p>ğŸ“Œ é€™äº›éƒ½æ˜¯ å‹•æ…‹å»ºç«‹çš„ DOM å…ƒç´ </p>
<p><strong>åã€ç›®æ¨™åœ“å½¢ï¼ˆéŠæˆ²æ ¸å¿ƒï¼‰</strong></p>
<p>target = document.createElement("div") target.style.width = "50px" target.style.height = "50px" target.style.borderRadius = "50%"<br/>â¡ï¸ ä¸€å€‹ 50Ã—50 çš„åœ“å½¢</p>
<p><br/>target.style.transition = "top 0.3s, left 0.3s"<br/>â¡ï¸ å¹³æ»‘ç§»å‹•å‹•ç•«</p>
<p><strong>åä¸€ã€ç§»å‹•åœ“å½¢</strong></p>
<p>def move_target():<br/>ğŸ”¹ åŠŸèƒ½æµç¨‹<br/>æª¢æŸ¥éŠæˆ²æ˜¯å¦é€²è¡Œä¸­</p>
<p>è¨ˆç®—æœ€å¤§å¯ç§»å‹•ç¯„åœ</p>
<p>éš¨æ©Ÿç”¢ç”Ÿæ–°ä½ç½®</p>
<p>éš¨æ©Ÿé¡è‰²</p>
<p>æ›´æ–° top / left</p>
<p>ğŸ“Œ min_y = 40<br/>â†’ é¿å…è“‹ä½ä¸Šæ–¹åˆ†æ•¸æ¬„</p>
<p><strong>åäºŒã€é»æ“Šäº‹ä»¶</strong></p>
<p>@target.bind("click") def hit_target(event):<br/>ğŸ”¹ é€™è£¡å¾ˆé‡è¦ï¼<br/>åªæœ‰é»åˆ°åœ“å½¢æ‰æœƒè§¸ç™¼</p>
<p>ä¸ç”¨é¡å¤–è¨ˆç®—è·é›¢</p>
<p>æµç¨‹ï¼š</p>
<p>åˆ†æ•¸ +1</p>
<p>æ›´æ–°é¡¯ç¤º</p>
<p>åœ“å½¢ç«‹å³ç§»å‹•</p>
<p>stopPropagation() é˜²æ­¢äº‹ä»¶å†’æ³¡</p>
<p><strong>åä¸‰ã€Ajax ä¸Šå‚³åˆ†æ•¸ï¼ˆBrython â†’ Flaskï¼‰</strong></p>
<p>req.open('POST', '{{ url_for("submit_score") }}', True)</p>
<p>ğŸ”¹ ç‚ºä»€éº¼è¦ {% endraw %}ï¼Ÿ</p>
<p>url_for() å¿…é ˆç”± Jinja2 è™•ç†</p>
<p>Brython ä¸èªå¾— Flask</p>
<p>ğŸ‘‰ é€™æ˜¯ Flask + Brython æ··ç”¨çš„æ¨™æº–å¯«æ³•</p>
<p><br/>json_payload = window.JSON.stringify({'score': final_score}) req.send(json_payload)<br/>â¡ï¸ é€å‡º JSONï¼š</p>
<p><br/>{ "score": 15 }</p>
<p><br/><strong>åå››ã€å€’æ•¸è¨ˆæ™‚èˆ‡éŠæˆ²çµæŸ</strong></p>
<p>def check_time():<br/>æ¯ç§’åŸ·è¡Œï¼š</p>
<p>è¨ˆç®—å‰©é¤˜æ™‚é–“</p>
<p>æ™‚é–“åˆ°ï¼š</p>
<p>åœæ­¢éŠæˆ²</p>
<p>ä¸Šå‚³åˆ†æ•¸</p>
<p>é¡¯ç¤ºçµæŸç•«é¢</p>
<p>æ¸…é™¤ç§»å‹•è¨ˆæ™‚å™¨</p>
<p><strong>åäº”ã€é‡æ–°é–‹å§‹</strong></p>
<p>def restart_game(event):<br/>éš±è—çµæŸç•«é¢</p>
<p>é‡æ–°åˆå§‹åŒ–éŠæˆ²</p>
<p><strong>åå…­ã€éŠæˆ²å•Ÿå‹•æµç¨‹</strong></p>
<p>def start_game(): score = 0 game_active = True check_time() move_target() timer.set_interval(move_target, 800)<br/>ğŸ“Œ å•Ÿå‹•æ™‚æœƒï¼š</p>
<p>åˆ†æ•¸æ­¸é›¶</p>
<p>å•Ÿå‹•å€’æ•¸</p>
<p>æ¯ 0.8 ç§’ç§»å‹•ä¸€æ¬¡åœ“å½¢</p>
<p><br/>start_game()<br/>â¡ï¸ ç¶²é ä¸€æ‰“é–‹å°±é–‹å§‹éŠæˆ² ğŸ®</p>
<p></p>
<br/><br/>ç¨‹å¼æ–°åŠŸèƒ½(æœŸæœ«å ±å‘Š2)
<p></p>
<h2><span data-teams="true">æˆ‘æ‰€æ·»åŠ çš„ç¨‹å¼æ–°åŠŸèƒ½</span></h2>
<p><strong>æˆ‘æŠŠç¨‹å¼æ”¹æˆï¼š</strong></p>
<p><strong>æ‰‹æ©Ÿå¯ç©</strong> â†’ é™¤äº† click ä¹Ÿæ”¯æ´ touchstart äº‹ä»¶</p>
<p><strong>åœ“é»é¡è‰²å›ºå®š</strong> â†’ ç§»é™¤éš¨æ©Ÿé¡è‰²ï¼Œè¨­å®šå›ºå®šé¡è‰²ï¼ˆä¾‹å¦‚ #ff4500ï¼‰</p>
<p><br/>ä»¥ä¸‹æ˜¯æˆ‘çš„ç¨‹å¼ç¢¼:</p>
<p># --- éŠæˆ²æ ¸å¿ƒé‚è¼¯ ---</p>
<p>def move_target():<br/> """ç§»å‹•ç›®æ¨™å…ƒç´ """<br/> if not game_active:<br/> return<br/> <br/> max_x = game_area.clientWidth - 50<br/> max_y = game_area.clientHeight - 50<br/> min_y = 40</p>
<p>new_x = random.randint(0, max(0, max_x))<br/> new_y = random.randint(min_y, max(min_y, max_y))<br/> <br/> # ğŸ”¹ å›ºå®šé¡è‰²ï¼Œç§»é™¤éš¨æ©Ÿé¡è‰²<br/> target.style.backgroundColor = "#ff4500"<br/> <br/> target.style.left = f"{new_x}px"<br/> target.style.top = f"{new_y}px"</p>
<p># ğŸ”¹ åŒæ™‚ç¶å®š click èˆ‡ touchstart äº‹ä»¶ï¼Œæ‰‹æ©Ÿä¹Ÿå¯è§¸ç™¼<br/>def hit_target(event):<br/> """é»æ“Šæˆ–è§¸ç¢°ç›®æ¨™æ™‚è§¸ç™¼"""<br/> global score<br/> if not game_active:<br/> return</p>
<p>score += 1<br/> score_display.text = f"åˆ†æ•¸: {score}"<br/> move_target()<br/> event.stopPropagation()</p>
<p>target.bind("click", hit_target)<br/>target.bind("touchstart", hit_target) # ğŸ”¹ æ–°å¢æ‰‹æ©Ÿè§¸æ§æ”¯æ´</p>
<p><br/><strong>ä¿®æ”¹é‡é»èªªæ˜ï¼š</strong></p>
<p><span style="background-color: #ffff99;">1.å›ºå®šé¡è‰²</span></p>
<p><span style="background-color: #ffff99;">target.style.backgroundColor = "#ff4500"</span></p>
<p><br/><span style="background-color: #ffff99;">2.ä¸å†éš¨æ©Ÿç”¢ç”Ÿ RGBã€‚</span></p>
<p><span style="background-color: #ffff99;">æ‰‹æ©Ÿæ”¯æ´</span></p>
<p><span style="background-color: #ffff99;">target.bind("touchstart", hit_target)</span></p>
<p><br/><span style="background-color: #ffff99;">æ‰‹æ©Ÿç€è¦½å™¨ä¸ä¸€å®šè§¸ç™¼ clickï¼ŒåŠ å…¥ touchstart æ‰èƒ½è§¸ç¢°åœ“é»å¾—åˆ†ã€‚</span></p>
<p><span style="background-color: #ffff99;">3.åŸæœ‰å‹•ç•«ä»ä¿ç•™</span></p>
<p><span style="background-color: #ffff99;">åœ“å½¢ç§»å‹•ä¾èˆŠå¹³æ»‘ (transition)</span></p>
<p><br/><strong>æˆ‘å†æ¬¡ä¿®æ”¹ï¼ŒæŠŠéŠæˆ²æ”¹æˆæ‰‹æ©Ÿå‹å–„ç‰ˆï¼ŒåŒ…å«ï¼š</strong></p>
<p><span style="background-color: #ffff99;">ç•«é¢è‡ªé©æ‡‰æ‰‹æ©Ÿå¯¬åº¦ï¼ˆæœ€å¤§ 600pxï¼Œæœ€å° 320pxï¼‰</span></p>
<p><span style="background-color: #ffff99;">åœ“é»å›ºå®šé¡è‰²</span></p>
<p><span style="background-color: #ffff99;">æ‰‹æ©Ÿè§¸æ§æ”¯æ´</span></p>
<p>ä¸‹é¢æ˜¯å®Œæ•´çš„ä¿®æ”¹ç¯„ä¾‹ï¼ˆåªä¿®æ”¹ HTML èˆ‡ Brython éƒ¨åˆ†ï¼‰ï¼š</p>
<p>&lt;div id="brython_div1" style="width: 100%; max-width: 600px; min-width: 320px; height: 400px; margin: 20px auto;"&gt;&lt;/div&gt;</p>
<p><br/>å¯¬åº¦ç”¨ 100%ï¼Œæ‰‹æ©Ÿæœƒè‡ªå‹•ç¸®æ”¾</p>
<p>max-width: 600px â†’ æ¡Œæ©Ÿä¸æœƒå¤ªå¤§</p>
<p>min-width: 320px â†’ æ‰‹æ©Ÿè¢å¹•æœ€å°å¯¬åº¦</p>
<p># --- éŠæˆ²æ ¸å¿ƒé‚è¼¯ ---</p>
<p>def move_target():<br/> """ç§»å‹•ç›®æ¨™å…ƒç´ """<br/> if not game_active:<br/> return<br/> <br/> max_x = game_area.clientWidth - 50<br/> max_y = game_area.clientHeight - 50<br/> min_y = 40</p>
<p>new_x = random.randint(0, max(0, max_x))<br/> new_y = random.randint(min_y, max(min_y, max_y))<br/> <br/> # ğŸ”¹ å›ºå®šé¡è‰²<br/> target.style.backgroundColor = "#ff4500"<br/> <br/> target.style.left = f"{new_x}px"<br/> target.style.top = f"{new_y}px"</p>
<p># ğŸ”¹ åŒæ™‚ç¶å®š click èˆ‡ touchstartï¼Œæ‰‹æ©Ÿå¯ç©<br/>def hit_target(event):<br/> global score<br/> if not game_active:<br/> return</p>
<p>score += 1<br/> score_display.text = f"åˆ†æ•¸: {score}"<br/> move_target()<br/> event.stopPropagation()</p>
<p>target.bind("click", hit_target)<br/>target.bind("touchstart", hit_target) # ğŸ”¹ æ‰‹æ©Ÿè§¸æ§æ”¯æ´</p>
<p>ğŸ”¹ é¡å¤–å»ºè­°ï¼šç•«é¢é©æ‡‰æ€§</p>
<p>è‹¥å¸Œæœ›åœ“å½¢å¤§å°ä¹Ÿéš¨è¢å¹•å¯¬åº¦è‡ªå‹•ç¸®æ”¾ï¼š</p>
<p>target_size = min(50, game_area.clientWidth * 0.1)<br/>target.style.width = f"{target_size}px"<br/>target.style.height = f"{target_size}px"</p>
<p><br/>æ‰‹æ©Ÿè¢å¹•å°æ™‚ï¼Œåœ“å½¢æœƒè‡ªå‹•ç¸®å°åˆ° 10% çš„ç•«é¢å¯¬åº¦</p>
<p>æ¡Œæ©Ÿç¶­æŒæœ€å¤§ 50px</p>
<p><br/><strong>ä¿®æ”¹å¾Œæ•ˆæœï¼š</strong></p>
<p><span style="background-color: #ffff99;">æ‰‹æ©Ÿèˆ‡å¹³æ¿éƒ½å¯ä»¥è§¸ç¢°åœ“é»å¾—åˆ†</span></p>
<p><span style="background-color: #ffff99;">åœ“é»é¡è‰²å›ºå®šï¼ŒéŠæˆ²æ›´ç©©å®š</span></p>
<p><span style="background-color: #ffff99;">æ‰‹æ©Ÿè‡ªé©æ‡‰å¯¬åº¦ï¼ŒéŠæˆ²ç•«é¢ä¸æœƒè¶…å‡ºè¢å¹•</span></p>
<p><br/><strong>æœ€å¾Œæ•´åˆ:</strong></p>
<p>{% extends "base.html" %}</p>
<p>{% block title %}Brython éŠæˆ²{% endblock %}</p>
<p>{% block content %}<br/> &lt;script type="text/javascript" src="https://cdn.jsdelivr.net/npm/brython@3.11.3/brython.min.js"&gt;&lt;/script&gt;<br/> &lt;script type="text/javascript" src="https://cdn.jsdelivr.net/npm/brython@3.11.3/brython_stdlib.js"&gt;&lt;/script&gt;<br/> <br/> &lt;body onload="brython(1)"&gt;</p>
<p>&lt;h2 style="text-align: center;"&gt;ğŸ•¹ï¸ é»æ“Šæ¸¬è©¦ï¼šé»æ“Šç§»å‹•ä¸­çš„åœ“å½¢ï¼&lt;/h2&gt;</p>
<p>&lt;div id="brython_div1" style="width: 100%; max-width: 600px; min-width: 320px; height: 400px; margin: 20px auto;"&gt;<br/> &lt;/div&gt;</p>
<p>{% raw %} <br/> &lt;script type="text/python"&gt;<br/> from browser import document, timer, window, ajax<br/> import random<br/> import time</p>
<p># --- éŠæˆ²è¨­å®š ---<br/> GAME_DURATION = 30 <br/> score = 0<br/> game_active = False</p>
<p># --- ç²å– DOM å…ƒç´ åŠåˆå§‹åŒ– ---<br/> game_area = document["brython_div1"]<br/> game_area.style.border = "3px solid #333"<br/> game_area.style.backgroundColor = "#e0e0ff"<br/> game_area.style.position = "relative"<br/> game_area.style.overflow = "hidden"<br/> game_area.style.cursor = "crosshair"</p>
<p># åˆ†æ•¸èˆ‡æ™‚é–“é¡¯ç¤º<br/> score_display = document.createElement("div")<br/> score_display.style.position = "absolute"<br/> score_display.style.top = "10px"<br/> score_display.style.left = "10px"<br/> score_display.style.fontSize = "1.2em"<br/> score_display.style.fontWeight = "bold"<br/> score_display.style.backgroundColor = "rgba(255, 255, 255, 0.7)"<br/> score_display.style.padding = "5px"<br/> game_area &lt;= score_display</p>
<p>timer_display = document.createElement("div")<br/> timer_display.style.position = "absolute"<br/> timer_display.style.top = "10px"<br/> timer_display.style.right = "10px"<br/> timer_display.style.fontSize = "1.2em"<br/> timer_display.style.fontWeight = "bold"<br/> timer_display.style.backgroundColor = "rgba(255, 255, 255, 0.7)"<br/> timer_display.style.padding = "5px"<br/> game_area &lt;= timer_display</p>
<p># å‰µå»ºç›®æ¨™åœ“é»<br/> target = document.createElement("div")<br/> target.id = "target"<br/> target.style.width = "50px"<br/> target.style.height = "50px"<br/> target.style.backgroundColor = "#ff4500" # ğŸ”¹ å›ºå®šé¡è‰²<br/> target.style.position = "absolute"<br/> target.style.borderRadius = "50%"<br/> target.style.cursor = "pointer"<br/> target.style.transition = "background-color 0.1s, top 0.3s, left 0.3s"<br/> game_area &lt;= target</p>
<p># éŠæˆ²çµæŸè¨Šæ¯<br/> game_over_msg = document.createElement("div")<br/> game_over_msg.style.position = "absolute"<br/> game_over_msg.style.top = "50%"<br/> game_over_msg.style.left = "50%"<br/> game_over_msg.style.transform = "translate(-50%, -50%)"<br/> game_over_msg.style.backgroundColor = "rgba(0, 0, 0, 0.9)"<br/> game_over_msg.style.color = "white"<br/> game_over_msg.style.padding = "30px"<br/> game_over_msg.style.borderRadius = "10px"<br/> game_over_msg.style.fontSize = "2em"<br/> game_over_msg.style.zIndex = "100"<br/> game_over_msg.style.display = "none"<br/> game_over_msg.style.textAlign = "center"<br/> game_area &lt;= game_over_msg</p>
<p># --- éŠæˆ²æ ¸å¿ƒé‚è¼¯ ---<br/> def move_target():<br/> if not game_active:<br/> return<br/> <br/> max_x = game_area.clientWidth - 50<br/> max_y = game_area.clientHeight - 50<br/> min_y = 40</p>
<p>new_x = random.randint(0, max(0, max_x))<br/> new_y = random.randint(min_y, max(min_y, max_y))<br/> <br/> target.style.left = f"{new_x}px"<br/> target.style.top = f"{new_y}px"<br/> # ğŸ”¹ é¡è‰²å›ºå®šï¼Œä¸å†éš¨æ©Ÿ<br/> target.style.backgroundColor = "#ff4500"</p>
<p># ğŸ”¹ é»æ“Šæˆ–è§¸ç¢°éƒ½èƒ½å¾—åˆ†ï¼ˆæ‰‹æ©Ÿå¯ç©ï¼‰<br/> def hit_target(event):<br/> global score<br/> if not game_active:<br/> return</p>
<p>score += 1<br/> score_display.text = f"åˆ†æ•¸: {score}"<br/> move_target()<br/> event.stopPropagation()</p>
<p>target.bind("click", hit_target)<br/> target.bind("touchstart", hit_target) # ğŸ”¹ æ‰‹æ©Ÿè§¸æ§</p>
<p>def submit_score_to_server(final_score):<br/> def on_complete(req):<br/> if req.status == 200:<br/> window.alert("åˆ†æ•¸æˆåŠŸä¸Šå‚³è‡³è‹±é›„æ¦œï¼")<br/> else:<br/> try:<br/> resp = window.JSON.parse(req.text)<br/> msg = resp.message<br/> except:<br/> msg = "è«‹æª¢æŸ¥ç™»å…¥ç‹€æ…‹æˆ–ä¼ºæœå™¨ç‹€æ…‹ï¼Œæˆ–ç¢ºä¿æ‚¨å·²ç™»å…¥ã€‚"<br/> window.alert(f"åˆ†æ•¸ä¸Šå‚³å¤±æ•— ({req.status})ï¼{msg}")<br/> <br/> req = ajax.ajax()<br/> req.bind('complete', on_complete)<br/> <br/> {% endraw %}<br/> req.open('POST', '{{ url_for("submit_score") }}', True)<br/> {% raw %}<br/> <br/> req.set_header('Content-Type', 'application/json')<br/> data = {'score': final_score}<br/> json_payload = window.JSON.stringify(data)<br/> req.send(json_payload)</p>
<p>def restart_game(event):<br/> game_over_msg.style.display = "none"<br/> start_game()<br/> event.stopPropagation()</p>
<p>def check_time():<br/> global game_active<br/> remaining = int(game_over_time - time.time())<br/> <br/> if remaining &lt;= 0:<br/> timer_display.text = "æ™‚é–“: 0s"<br/> if game_active:<br/> game_active = False<br/> submit_score_to_server(score)<br/> game_over_msg.innerHTML = f"éŠæˆ²çµæŸï¼&lt;br&gt;æœ€çµ‚åˆ†æ•¸: {score}"<br/> <br/> restart_btn = document.createElement("button")<br/> restart_btn.text = "é‡æ–°é–‹å§‹"<br/> restart_btn.style.marginTop = "15px"<br/> restart_btn.style.padding = "10px 20px"<br/> restart_btn.style.fontSize = "0.7em"<br/> restart_btn.style.cursor = "pointer"<br/> restart_btn.bind("click", restart_game)<br/> <br/> game_over_msg &lt;= document.createElement("br")<br/> game_over_msg &lt;= restart_btn<br/> game_over_msg.style.display = "block"<br/> <br/> timer.clear_interval(move_interval_handle)<br/> else:<br/> timer_display.text = f"æ™‚é–“: {remaining}s"<br/> timer.set_timeout(check_time, 1000)</p>
<p># --- éŠæˆ²å•Ÿå‹• ---<br/> def start_game():<br/> global game_active, game_over_time, move_interval_handle, score<br/> score = 0<br/> game_active = True<br/> score_display.text = "åˆ†æ•¸: 0"<br/> timer_display.text = f"æ™‚é–“: {GAME_DURATION}s"<br/> <br/> game_over_time = time.time() + GAME_DURATION<br/> <br/> check_time()<br/> move_target()<br/> move_interval_handle = timer.set_interval(move_target, 800)</p>
<p># å•Ÿå‹•éŠæˆ²<br/> start_game()</p>
<p>&lt;/script&gt;<br/> {% endraw %}<br/> <br/> &lt;/body&gt;<br/>{% endblock %}</p>
<p><br/><strong>ä¿®æ”¹é‡é»ç¸½çµï¼š</strong></p>
<p><span style="background-color: #ffff99;">æ‰‹æ©Ÿè‡ªé©æ‡‰ç•«é¢ï¼š</span></p>
<p><span style="background-color: #ffff99;">width: 100%; max-width: 600px; min-width: 320px;</span></p>
<p><br/><span style="background-color: #ffff99;">å›ºå®šåœ“é»é¡è‰²ï¼š</span></p>
<p><span style="background-color: #ffff99;">target.style.backgroundColor = "#ff4500"</span></p>
<p><br/><span style="background-color: #ffff99;">æ‰‹æ©Ÿè§¸æ§æ”¯æ´ï¼š</span></p>
<p><span style="background-color: #ffff99;">target.bind("touchstart", hit_target)</span></p>
<p><br/><strong>é€™å€‹ç‰ˆæœ¬ï¼š</strong></p>
<p>æ‰‹æ©Ÿå’Œå¹³æ¿éƒ½èƒ½æ­£å¸¸é»æ“Š / è§¸ç¢°åœ“é»</p>
<p>ç•«é¢è‡ªå‹•ç¸®æ”¾ï¼Œä¸æœƒè¶…å‡ºæ‰‹æ©Ÿè¢å¹•</p>
<p>é¡è‰²å›ºå®šï¼ŒéŠæˆ²æ›´ç©©å®š</p>
<p><span data-teams="true"></span></p>
<p></p>